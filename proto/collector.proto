syntax = "proto3";

package collector;

import "common.proto";

message CollectResponse { bool accepted = 1; }

service LogCollector {
  // Public-facing ingestion endpoint:
  // - Clients (apps, agents, tools, etc.) open a streaming RPC and push RawLog
  // messages.
  // - The Log Collector micro-service normalizes each RawLog into NormalizedLog
  // internally.
  // - The collector then forwards NormalizedLog entries to the Embedding
  // micro-service (via shipper module), and emits CollectResponse
  // acknowledgements back.
  //
  // Semantics & Guidance:
  // - Clients should treat the RPC as fire-and-forget for best througput: the
  // log collector will acknowledge when it has accepted/queued a log, not
  // necessarily when the embedding is fully persisted by the Embedding
  // micro-service (this keeps log ingestion decoupled).
  // - The log collector may reply `accepted: false` when validation fails or
  // when internal backpressure forces a rejection.
  rpc StreamLog(stream common.RawLog) returns (stream CollectResponse);
}
